<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SuniCoin Blockchain</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-50 py-10 px-4">
    <h1 class="text-2xl font-bold mb-6 text-center">SuniCoin Blockchain Explorer</h1>

    <section class="mb-8 max-w-xl mx-auto bg-white p-6 rounded shadow">
        <h2 class="text-xl font-semibold mb-4">Wallet</h2>
        <button id="createWallet" class="px-4 py-2 bg-blue-500 text-white rounded">Create Wallet</button>
        <pre id="wallet" class="mt-4 bg-gray-100 p-4 rounded overflow-auto"></pre>
    </section>

    <section class="mb-8 max-w-xl mx-auto bg-white p-6 rounded shadow">
        <h2 class="text-xl font-semibold mb-4">Create Transaction</h2>
        <div class="flex flex-col gap-2">
            <input id="recipient" placeholder="recipient address" class="border p-2 rounded" />
            <input id="amount" type="number" placeholder="amount" class="border p-2 rounded" />
            <button id="sendTransaction" class="px-4 py-2 bg-green-500 text-white rounded">Send</button>
        </div>
        <pre id="transactionResult" class="mt-4 bg-gray-100 p-4 rounded overflow-auto"></pre>
    </section>

    <section class="mb-8 text-center">
        <button id="mine" class="px-4 py-2 bg-purple-500 text-white rounded">Mine Transactions</button>
    </section>

    <section class="max-w-xl mx-auto bg-white p-6 rounded shadow">
        <h2 class="text-xl font-semibold mb-4">Blocks</h2>
        <button id="refreshBlocks" class="px-4 py-2 bg-blue-500 text-white rounded">Refresh Blocks</button>
        <pre id="blocks" class="mt-4 bg-gray-100 p-4 rounded overflow-auto"></pre>
    </section>

    <script>
        const walletEl = document.getElementById('wallet');
        const transactionResultEl = document.getElementById('transactionResult');
        const blocksEl = document.getElementById('blocks');

        async function createWallet() {
            const res = await fetch('/api/wallet/new', { method: 'POST' });
            const json = await res.json();
            walletEl.textContent = JSON.stringify(json.data, null, 2);
        }

        async function sendTransaction() {
            const recipient = document.getElementById('recipient').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const res = await fetch('/api/transactions', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ recipient, amount })
            });
            const json = await res.json();
            transactionResultEl.textContent = JSON.stringify(json, null, 2);
        }

        async function mineTransactions() {
            await fetch('/api/mine/transactions');
            await refreshBlocks();
        }

        async function refreshBlocks() {
            const res = await fetch('/api/blocks');
            const json = await res.json();
            blocksEl.textContent = JSON.stringify(json, null, 2);
        }

        document.getElementById('createWallet').onclick = createWallet;
        document.getElementById('sendTransaction').onclick = sendTransaction;
        document.getElementById('mine').onclick = mineTransactions;
        document.getElementById('refreshBlocks').onclick = refreshBlocks;

        refreshBlocks();
    </script>
</body>
</html>
